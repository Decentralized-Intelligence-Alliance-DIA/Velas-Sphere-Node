# Velas Sphere

Velas Sphere is an opensource initiative and ecosystem allowing usual customers perform resource-demanding tasks using storage, CPU and GPU sharing concepts.

## Status

This respository is an active WIP.

## Architecture 

Velas Sphere is a P2P network of nodes communicating between each other using gRPC. Each node can act as a requester and provider, has some plugins and provides a RESTful API for UI support. The data is stored in a LevelDB database. In order to allow plugins be written in any general-purpose language, they are physically decoupled from the node service using again gRPC and each plugin is basically a separate service.

Here is how the node architecture looks like:

![](assets/velas-sphere-node-architecture-3.0-github.png)

## Economy

Requesters pay providers for the shared resources using Ethereum Network and smart-contracts.

## Building, Installing and Running a Velas Sphere node locally

Since the whole Velas Sphere node service is implemented using Golang exclusively, it is very simple to build and run. It also comes with a simple plugin for demo purposes.
```bash
$ cp config-local-example.json config.json
$ CGO_ENABLED=0 go build .
$ ./velas-sphere plugin
$ ./velas-sphere node
```

Dockerized version uses multi-stage dockerfile for multiple lightweight images, so it looks like this:

``` sh
$ cp config-docker-example.json config.json
$ mkdir db
$ docker build --target velas-sphere-plugin -t velas-sphere-plugin-local .
$ docker build --target velas-sphere-node -t velas-sphere-node-local .
$ docker-compose up -d
```

You can request task execution via a simple RESTful API. The following example shows how to request task execution on a dockerized deployment using a single node:

``` sh 
curl -X POST 127.0.0.1:3000/task_execution_request -d \
'{
    "target": "node:8081", 
    "id": "1",
    "input": "hello"
}'
```

The response will be the following:

```json
{"id":"1","output":"world"}
```

## Contribution Guideline

Basic contribution rules are:

1. Each package serves a single signature. It can contain both instances or their constructors accepting a config
2. All packages are located in the `internal` folder
3. `"internal/resources"` is a special package since it contains the Protobuf defenition and autogenerated files